import SwiftUI

struct ContentView: View {
    @State private var score = 0
    @State private var timeRemaining = 10
    @State private var circlePosition = CGPoint(x: 150, y: 300)
    @State private var gameRunning = false
    @State private var timer: Timer?

    var body: some View {
        ZStack {
            VStack {
                Text("Score: \(score)")
                    .font(.largeTitle)
                    .padding()

                Text("Time: \(timeRemaining)")
                    .font(.title2)

                Spacer()

                Button(action: startGame) {
                    Text(gameRunning ? "Restart" : "Start Game")
                        .font(.title2)
                        .padding()
                        .background(Color.blue)
                        .foregroundColor(.white)
                        .cornerRadius(12)
                }
                .padding()
            }

            if gameRunning {
                Circle()
                    .fill(Color.red)
                    .frame(width: 80, height: 80)
                    .position(circlePosition)
                    .onTapGesture {
                        score += 1
                        moveCircle()
                    }
                    .animation(.easeInOut(duration: 0.2), value: circlePosition)
            }
        }
    }

    func startGame() {
        score = 0
        timeRemaining = 10
        gameRunning = true
        moveCircle()

        timer?.invalidate()
        timer = Timer.scheduledTimer(withTimeInterval: 1, repeats: true) { _ in
            timeRemaining -= 1
            if timeRemaining == 0 {
                gameRunning = false
                timer?.invalidate()
            }
        }
    }

    func moveCircle() {
        let screenWidth = UIScreen.main.bounds.width
        let screenHeight = UIScreen.main.bounds.height

        circlePosition = CGPoint(
            x: CGFloat.random(in: 50...(screenWidth - 50)),
            y: CGFloat.random(in: 150...(screenHeight - 150))
        )
    }
}

#Preview {
    ContentView()
}
